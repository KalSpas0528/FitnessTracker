<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerTitan Fitness Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Load all dependencies before our scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-100">
    <!-- Your existing HTML content -->
    <div id="app">
        <!-- ... (keep existing content) ... -->
    </div>

    <!-- Initialize Supabase first -->
    <script>
        // Initialize Supabase client globally
        const supabaseUrl = 'https://pswsfndbnlpeqaznztss.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzd3NmbmRibmxwZXFhem56dHNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk1MzczMjUsImV4cCI6MjA0NTExMzMyNX0.MvEiRJ-L9qpuQ7ma4PCBNbWYdQk6wInwnqvCCHvyuLE';
        window.supabase = supabase.createClient(supabaseUrl, supabaseKey);
        
        // Global error handler
        window.addEventListener('error', function(event) {
            console.error('Error:', event.error);
        });
    </script>

    <!-- Load our application scripts -->
    <script>
        // Define navigation functions globally
        window.showDashboard = function() {
            console.log('Showing dashboard');
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Dashboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Dashboard content -->
                </div>
            `;
        };

        window.showAddWorkout = function() {
            console.log('Showing add workout');
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Add Workout</h2>
                <form id="workout-form" class="card">
                    <!-- Form content -->
                </form>
            `;
        };

        window.showLoginForm = function() {
            console.log('Showing login form');
            document.getElementById('loginModal').classList.remove('hidden');
        };

        window.showSignupForm = function() {
            console.log('Showing signup form');
            document.getElementById('signupModal').classList.remove('hidden');
        };

        window.showNutrition = function() {
            console.log('Showing nutrition');
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Nutrition Tracking</h2>
                <!-- Nutrition content -->
            `;
        };

        window.showMotivation = function() {
            console.log('Showing motivation');
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Daily Motivation</h2>
                <!-- Motivation content -->
            `;
        };

        window.showChatWithTitanAI = function() {
            console.log('Showing AI chat');
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Chat with Titan AI</h2>
                <!-- Chat content -->
            `;
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('App initializing...');
            // Show dashboard by default
            showDashboard();
            
            // Add event listeners for forms
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    // Handle login
                    console.log('Login attempted');
                });
            }

            const signupForm = document.getElementById('signupForm');
            if (signupForm) {
                signupForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    // Handle signup
                    console.log('Signup attempted');
                });
            }
        });
    </script>
</body>
</html>

